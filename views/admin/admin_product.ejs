<%-include('header')-%>
<%-include('adminNav')-%>

  <div class="container-fluid admin">
    <table id="example" class="display" style="width:100%">
      <thead>
          <tr>
              <th>NO</th>
              <th>Date</th>
              <th>Product Name</th>
              <th>Description</th>
              <th>Stock</th>
              <th>Price</th>
              <th>Catogory</th>
              <th>Image</th>
              <th>Edit</th>
              <th>Delete</th>
          </tr>
      </thead>
      <tbody>
        <% product.forEach((element,i)=>{ %>
  
          <tr>
            <th scope="row"><%=i+1%></th>
            <td><%=element.Date%></td>
            <td><%=element.name%></td>
            <td><%=element.description%></td>
            <td><%=element.stock%></td>
            <td><%=element.price%></td>
            <td><%=element.categoryInfo.catogory%></td>
            <td><img style="width:90px;height:70px" src="/images/<%=element._id%>.jpg" alt=""></td>
            <td><a href="/admin/edit-product/<%=element._id%> "class="btn btn-info">Edit</a></td>
            <td><button onclick="return confirm('do you want to delete this product') , deleteProduct(`<%=element._id%>`)" class="btn">Delete</button></td>
            
          </tr>
        <% }) %>
        </tbody>
    </table>
    
    <a  class="btn btn-success " href="/admin/admin_addproduct">Add Product</a>
    <a href="/admin/add_categories" class="btn" >Add category</a>
     </div>
     
    <script>
      function deleteProduct(id) {
        console.log(id)
        $.ajax({
          url:`/admin/delete-product/${id}`,
          method:'delete',
          success : (response) => {
            location.reload()
          }
        })
      }
    </script>
 
  
<%- include('footer') -%>